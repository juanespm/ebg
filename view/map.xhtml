<!DOCTYPE html>

<f:view xmlns="http://www.w3.org/1999/xhtml"
   xmlns:f="http://java.sun.com/jsf/core"
   xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
   contentType="text/html">
<html>
    <head>
        <title>OpenLayers Mobile</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
        <meta name="apple-mobile-web-app-capable" content="yes"/>
        <link rel="stylesheet" href="js/OpenLayers/theme/default/style.mobile.css" type="text/css"/>
        <script type="text/javascript"
            src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
        <script type="text/javascript" src="js/OpenLayers/OpenLayers.mobile.js"></script>
        <script type="text/javascript">

        Richfaces.showModalPanel("wait");
        

        $jq = jQuery.noConflict();
        $jq.ajaxSetup({
            cache: false
        });
        
     // initialize map when page ready
        var map;

        // Get rid of address bar on iphone/ipod
        var fixSize = function() {
            window.scrollTo(0,0);
            document.body.style.height = '100%';
            if (!(/(iphone|ipod)/.test(navigator.userAgent.toLowerCase()))) {
                if (document.body.parentNode) {
                    document.body.parentNode.style.height = '100%';
                }
            }
        };
        setTimeout(fixSize, 700);
        setTimeout(fixSize, 1500);

        var init = function () {
            // create map
            map = new OpenLayers.Map({
                div: "map",
                theme: null,
                controls: [
                    new OpenLayers.Control.Attribution(),
                    new OpenLayers.Control.TouchNavigation({
                        dragPanOptions: {
                            enableKinetic: true
                        }
                    }),
                    new OpenLayers.Control.Zoom()
                ],
                layers: [
                    new OpenLayers.Layer.OSM("OpenStreetMap", null, {
                        transitionEffect: 'resize'
                    })
                ],
                center: new OpenLayers.LonLat(742000, 5861000),
                zoom: 3
            });
        };
        Richfaces.hideModalPanel("wait");
        </script>
        <style>
            html, body {
                margin  : 0;
                padding : 0;
                height  : 100%;
                width   : 100%;
            }
            @media only screen and (max-width: 600px) {
                html, body {
                    height  : 117%;
                }
            }
            #map {
                width    : 100%;
                position : relative;
                height   : 100%;
            }
            .olControlAttribution {
                position      : absolute;
                font-size     : 10px;
                bottom        : 0 !important;
                right         : 0 !important;
                background    : rgba(0,0,0,0.1);
                font-family   : Arial;
                padding       : 2px 4px;
                border-radius : 5px 0 0 0;
            }
            #title, #tags, #shortdesc {
                display: none;
            }
        </style>
    </head>
    <body>
        <h1 id="title">Basic Mobile Example</h1>
        <div id="tags">
            mobile
        </div>
        <p id="shortdesc">
            A basic full-screen map for mobile devices.
        </p>
        <div id="map"></div>
        
        <rich:modalPanel id="wait" autosized="true" width="200" height="200"
            moveable="false" resizeable="false">
            <h:outputText value="Please Wait..." />
        </rich:modalPanel>
        
        <script>
            $jq(window).load(init);
        </script>
    </body>
</html>

</f:view>